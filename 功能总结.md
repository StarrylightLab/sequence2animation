# 图片分割工具功能总结

## 程序概述
这是一个图形化图片分割工具，用于将PNG序列图分割成动画帧，并保存为WebP或APNG格式的动画文件。

## 核心功能列表

### 1. 图片加载与管理
- **图片加载**: 界面上支持从指定文件夹加载PNG格式图片
- **动画导出位置**: 支持指定导出文件夹
- **自动扫描PNG文件**: 自动扫描指定文件夹中的所有PNG格式图片
- **图片排序**: 按文件名排序，确保处理顺序一致
- **图片预览**: 实时显示当前处理的图片，支持缩放以适应窗口
- **批量处理**: 支持批量处理多张图片，自动切换到下一张

### 2. 可视化分割界面
- **实时预览**: 显示原始图片并叠加红色网格线，直观显示分割效果
- **动画预览**: 实时显示当前分割结果
- **动态调整**: 支持实时调整行列数，立即更新预览
- **缩放适应**: 自动计算缩放比例，确保图片适应预览窗口
- **网格显示**: 红色半透明网格线，清晰标示分割边界

### 3. 交互控制
- **键盘控制**:
  - `↑/↓` 键：增加/减少行数（1-20行）
  - `←/→` 键：增加/减少列数（1-20列）
  - `回车` 键：确认当前分割并保存动画
  - `ESC` 键：退出程序
- **窗口调整**: 支持拖拽调整窗口大小，预览自动适应

### 4. 智能分割算法
- **透明帧过滤**: 自动跳过完全透明的帧，避免生成空白动画
- **精确裁剪**: 基于行列数精确计算每个帧的位置和尺寸
- **Alpha通道处理**: 完整保留PNG的透明通道信息

### 5. 动画生成与保存
- **多格式支持**: 支持WebP和APNG两种动画格式
- **帧率设置**: 可配置动画帧率（默认12fps）
- **循环播放**: 生成的动画支持无限循环播放
- **质量优化**: WebP格式使用无损压缩，保证画质

### 6. 参数配置
- **可调参数**: 提供多个可调参数，包括：
  - 动画帧率（fps）
  - 动画格式（WebP/APNG）
  - 透明度阈值
  - 最大行列数限制
  - 预览窗口最大尺寸
  - 调试模式开关

### 7. 错误处理与提示
- **文件存在检查**: 检查输入文件夹和图片文件是否存在
- **格式验证**: 验证图片格式是否为支持的PNG
- **完成提示**: 处理完成后显示提示信息
- **调试信息**: 可选的调试模式，输出详细处理信息

### 8. 用户界面特性
- **直观显示**: 
  - 当前处理进度（第几张/总张数）
  - 文件名显示
  - 分割参数（行列数）
  - 缩放比例
  - 原图尺寸和帧尺寸
- **状态反馈**: 实时显示操作状态和错误信息

## 使用流程
1. 设置输入文件夹路径（包含PNG序列图）
2. 设置输出文件夹路径（保存生成的动画）
3. 运行程序，自动加载第一张图片
4. 使用方向键调整行列分割数
5. 观察预览效果，确认分割参数
6. 按回车键保存当前动画
7. 程序自动切换到下一张图片
8. 重复步骤4-7，直到所有图片处理完成
9. 按ESC键退出程序

## 输出结果
- 在指定输出文件夹中生成WebP或APNG格式的动画文件
- 文件名与原PNG文件保持一致，仅扩展名改变
- 每个动画包含分割后的所有有效帧（跳过透明帧）
- 动画支持循环播放，帧率可配置